<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Index.html è¨ºæ–·</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background: #f0f0f0;
        }
        .diagnostic {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .success { border-left-color: #28a745; }
        .error { border-left-color: #dc3545; }
        .warning { border-left-color: #ffc107; }
        h1 { color: #333; }
        code { 
            background: #f4f4f4; 
            padding: 2px 6px; 
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Index.html è¨ºæ–·å·¥å…·</h1>
    
    <div class="diagnostic">
        <h3>ğŸ“‹ æ­¥é©Ÿèªªæ˜</h3>
        <p>1. é»æ“Šä¸‹æ–¹ã€Œé–‹å§‹è¨ºæ–·ã€æŒ‰éˆ•</p>
        <p>2. æŒ‰ <strong>F12</strong> é–‹å•Ÿé–‹ç™¼è€…å·¥å…·æŸ¥çœ‹ Console</p>
        <p>3. å›å ±è¨ºæ–·çµæœ</p>
    </div>
    
    <button onclick="runDiagnostics()">ğŸš€ é–‹å§‹è¨ºæ–·</button>
    <button onclick="testLoadIndexPage()">ğŸ“„ æ¸¬è©¦è¼‰å…¥ Index é é¢</button>
    
    <div id="results"></div>
    
    <script type="module">
        window.runDiagnostics = async function() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="diagnostic"><h3>ğŸ”„ è¨ºæ–·ä¸­...</h3></div>';
            
            const results = [];
            
            // æ¸¬è©¦ 1: æª¢æŸ¥å¿…è¦çš„ DOM å…ƒç´ 
            console.log('=== æ¸¬è©¦ 1: DOM å…ƒç´ æª¢æŸ¥ ===');
            const requiredElements = [
                'mainNav',
                'mainContent', 
                'themeNav',
                'themeContent',
                'adminLoginBtn',
                'adminLoginModal',
                'adminLoginForm'
            ];
            
            let elementsFound = 0;
            requiredElements.forEach(id => {
                // å…ˆæª¢æŸ¥ç•¶å‰é é¢
                let el = document.getElementById(id);
                if (el) {
                    console.log(`âœ… ç•¶å‰é é¢æ‰¾åˆ°: #${id}`);
                    elementsFound++;
                } else {
                    console.warn(`âš ï¸ ç•¶å‰é é¢æ‰¾ä¸åˆ°: #${id}`);
                }
            });
            
            results.push({
                title: 'DOM å…ƒç´ æª¢æŸ¥ï¼ˆç•¶å‰æ¸¬è©¦é é¢ï¼‰',
                status: elementsFound > 0 ? 'warning' : 'error',
                message: `æ‰¾åˆ° ${elementsFound}/${requiredElements.length} å€‹å¿…è¦å…ƒç´ `
            });
            
            // æ¸¬è©¦ 2: è¼‰å…¥ Firebase è¨­å®š
            console.log('=== æ¸¬è©¦ 2: Firebase è¨­å®š ===');
            try {
                const firebaseModule = await import('./scripts/firebase-config.js');
                console.log('âœ… Firebase æ¨¡çµ„è¼‰å…¥æˆåŠŸ');
                console.log('   isFirebaseConfigured:', firebaseModule.isFirebaseConfigured);
                console.log('   database._isDemoMode:', firebaseModule.database?._isDemoMode);
                console.log('   auth._isDemoMode:', firebaseModule.auth?._isDemoMode);
                
                results.push({
                    title: 'Firebase è¨­å®š',
                    status: 'success',
                    message: `æ¨¡çµ„è¼‰å…¥æˆåŠŸ (${firebaseModule.isFirebaseConfigured ? 'å·²è¨­å®š' : 'Demo æ¨¡å¼'})`
                });
            } catch (error) {
                console.error('âŒ Firebase è¼‰å…¥å¤±æ•—:', error);
                results.push({
                    title: 'Firebase è¨­å®š',
                    status: 'error',
                    message: `è¼‰å…¥å¤±æ•—: ${error.message}`
                });
            }
            
            // æ¸¬è©¦ 3: è¼‰å…¥ App.js
            console.log('=== æ¸¬è©¦ 3: App.js ===');
            try {
                const appModule = await import('./scripts/app.js');
                console.log('âœ… App.js è¼‰å…¥æˆåŠŸ');
                console.log('   å¯ç”¨å‡½æ•¸:', Object.keys(appModule));
                
                results.push({
                    title: 'App.js',
                    status: 'success',
                    message: 'æ¨¡çµ„è¼‰å…¥æˆåŠŸ'
                });
            } catch (error) {
                console.error('âŒ App.js è¼‰å…¥å¤±æ•—:', error);
                results.push({
                    title: 'App.js',
                    status: 'error',
                    message: `è¼‰å…¥å¤±æ•—: ${error.message}`
                });
            }
            
            // æ¸¬è©¦ 4: è¼‰å…¥ Utils.js
            console.log('=== æ¸¬è©¦ 4: Utils.js ===');
            try {
                const utilsModule = await import('./scripts/utils.js');
                console.log('âœ… Utils.js è¼‰å…¥æˆåŠŸ');
                console.log('   å¯ç”¨å‡½æ•¸:', Object.keys(utilsModule));
                
                results.push({
                    title: 'Utils.js',
                    status: 'success',
                    message: 'æ¨¡çµ„è¼‰å…¥æˆåŠŸ'
                });
            } catch (error) {
                console.error('âŒ Utils.js è¼‰å…¥å¤±æ•—:', error);
                results.push({
                    title: 'Utils.js',
                    status: 'error',
                    message: `è¼‰å…¥å¤±æ•—: ${error.message}`
                });
            }
            
            // é¡¯ç¤ºçµæœ
            let html = '';
            results.forEach(result => {
                html += `
                    <div class="diagnostic ${result.status}">
                        <h3>${result.title}</h3>
                        <p>${result.message}</p>
                    </div>
                `;
            });
            
            html += `
                <div class="diagnostic">
                    <h3>ğŸ“Š è¨ºæ–·æ‘˜è¦</h3>
                    <p>è«‹æŸ¥çœ‹ç€è¦½å™¨ Consoleï¼ˆF12ï¼‰ç²å–è©³ç´°è³‡è¨Š</p>
                    <p><strong>ä¸‹ä¸€æ­¥ï¼š</strong>é»æ“Šã€Œæ¸¬è©¦è¼‰å…¥ Index é é¢ã€æŒ‰éˆ•</p>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
        };
        
        window.testLoadIndexPage = function() {
            console.log('=== æ¸¬è©¦è¼‰å…¥ Index é é¢ ===');
            console.log('å³å°‡è·³è½‰åˆ° index.html...');
            console.log('è«‹æ³¨æ„ Console ä¸­çš„è¨Šæ¯');
            
            setTimeout(() => {
                window.location.href = '/index.html';
            }, 1000);
        };
    </script>
</body>
</html>
