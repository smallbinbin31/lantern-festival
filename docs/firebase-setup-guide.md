# Firebase è¨­å®šæŒ‡å¼•

å®Œæ•´çš„ Firebase å°ˆæ¡ˆè¨­å®šæ­¥é©Ÿï¼Œç”¨æ–¼å¡­å µé¾èˆˆå ‚115å¹´å…ƒå®µç¯€æ´»å‹•ç¶²ç«™ã€‚

---

## ğŸ“‹ å‰ç½®éœ€æ±‚

- Google å¸³è™Ÿ
- ç€è¦½å™¨ï¼ˆChrome, Firefox, Edge ç­‰ï¼‰
- æœ¬å°ˆæ¡ˆå·²ä¸‹è¼‰åˆ°æœ¬æ©Ÿ

---

## ğŸ”¥ æ­¥é©Ÿ 1ï¼šå»ºç«‹ Firebase å°ˆæ¡ˆ

### 1.1 å‰å¾€ Firebase Console

1. é–‹å•Ÿç€è¦½å™¨ï¼Œå‰å¾€ï¼šhttps://console.firebase.google.com/
2. ä½¿ç”¨æ‚¨çš„ Google å¸³è™Ÿç™»å…¥

### 1.2 å»ºç«‹æ–°å°ˆæ¡ˆ

1. é»æ“Šã€Œæ–°å¢å°ˆæ¡ˆã€æˆ–ã€ŒCreate a projectã€
2. **å°ˆæ¡ˆåç¨±**ï¼šè¼¸å…¥ `lantern-festival-2026`ï¼ˆæˆ–æ‚¨åå¥½çš„åç¨±ï¼‰
3. é»æ“Šã€Œç¹¼çºŒã€
4. **Google Analytics**ï¼šå¯é¸æ“‡åœç”¨ï¼ˆæ­¤å°ˆæ¡ˆä¸éœ€è¦ï¼‰
5. é»æ“Šã€Œå»ºç«‹å°ˆæ¡ˆã€
6. ç­‰å¾…å°ˆæ¡ˆå»ºç«‹å®Œæˆï¼ˆç´„ 30 ç§’ï¼‰
7. é»æ“Šã€Œç¹¼çºŒã€é€²å…¥å°ˆæ¡ˆæ§åˆ¶å°

âœ… **Task T005 éƒ¨åˆ†å®Œæˆ**

---

## ğŸ—„ï¸ æ­¥é©Ÿ 2ï¼šå•Ÿç”¨ Realtime Database

### 2.1 å»ºç«‹ Realtime Database

1. åœ¨ Firebase Console å·¦å´é¸å–®ä¸­ï¼Œé»æ“Šã€Œå»ºæ§‹ã€â†’ã€ŒRealtime Databaseã€
2. é»æ“Šã€Œå»ºç«‹è³‡æ–™åº«ã€æŒ‰éˆ•
3. **è³‡æ–™åº«ä½ç½®**ï¼šé¸æ“‡ `asia-southeast1`ï¼ˆæ–°åŠ å¡ï¼Œæœ€æ¥è¿‘å°ç£ï¼‰
4. é»æ“Šã€Œä¸‹ä¸€æ­¥ã€

### 2.2 è¨­å®šå®‰å…¨æ€§è¦å‰‡

1. **å®‰å…¨æ€§è¦å‰‡æ¨¡å¼**ï¼šé¸æ“‡ã€Œ**é–å®šæ¨¡å¼**ã€ï¼ˆè¼ƒå®‰å…¨ï¼‰
2. é»æ“Šã€Œå•Ÿç”¨ã€
3. ç­‰å¾…è³‡æ–™åº«å»ºç«‹å®Œæˆ

### 2.3 éƒ¨ç½²è‡ªè¨‚å®‰å…¨æ€§è¦å‰‡

1. åœ¨ Realtime Database é é¢ï¼Œé»æ“Šã€Œè¦å‰‡ã€æ¨™ç±¤
2. å°‡ä»¥ä¸‹è¦å‰‡**å®Œæ•´è¤‡è£½**ä¸¦**å–ä»£**ç¾æœ‰å…§å®¹ï¼š

```json
{
  "rules": {
    "registrations": {
      ".read": "auth != null",
      ".write": "auth != null || request.auth == null",
      "$registrationId": {
        ".validate": "newData.hasChildren(['name', 'phone', 'timestamp', 'createdAt'])",
        "name": {
          ".validate": "newData.isString() && newData.val().length >= 2 && newData.val().length <= 50"
        },
        "phone": {
          ".validate": "newData.isString() && newData.val().matches(/^[0-9]{10,12}$/)"
        },
        "timestamp": {
          ".validate": "newData.isNumber()"
        },
        "createdAt": {
          ".validate": "newData.isString()"
        }
      }
    }
  }
}
```

3. é»æ“Šã€Œç™¼å¸ƒã€æŒ‰éˆ•
4. ç¢ºèªç™¼å¸ƒ

### 2.4 è¨˜éŒ„ Database URL

1. åœ¨ã€Œè³‡æ–™ã€æ¨™ç±¤ä¸­ï¼ŒæŸ¥çœ‹é é¢é ‚éƒ¨çš„ URL
2. **ç¯„ä¾‹**ï¼š`https://lantern-festival-2026-default-rtdb.firebaseio.com/`
3. **è¤‡è£½æ­¤ URL**ï¼Œç¨å¾Œæœƒç”¨åˆ°

âœ… **Task T005 å®Œæˆ**

---

## ğŸ” æ­¥é©Ÿ 3ï¼šå•Ÿç”¨ Authentication

### 3.1 å•Ÿç”¨ Email/Password é©—è­‰

1. åœ¨ Firebase Console å·¦å´é¸å–®ä¸­ï¼Œé»æ“Šã€Œå»ºæ§‹ã€â†’ã€ŒAuthenticationã€
2. é»æ“Šã€Œé–‹å§‹ä½¿ç”¨ã€æŒ‰éˆ•
3. é¸æ“‡ã€ŒSign-in methodã€ï¼ˆç™»å…¥æ–¹æ³•ï¼‰æ¨™ç±¤
4. æ‰¾åˆ°ã€ŒEmail/Passwordã€é¸é …ï¼Œé»æ“Šå®ƒ
5. **å•Ÿç”¨ã€ŒEmail/Passwordã€**ï¼ˆç¬¬ä¸€å€‹é–‹é—œï¼‰
6. **ä¸è¦å•Ÿç”¨**ã€Œé›»å­éƒµä»¶é€£çµï¼ˆå…å¯†ç¢¼ç™»å…¥ï¼‰ã€
7. é»æ“Šã€Œå„²å­˜ã€

âœ… **Task T006 å®Œæˆ**

---

## ğŸ‘¤ æ­¥é©Ÿ 4ï¼šå»ºç«‹ç®¡ç†è€…å¸³è™Ÿ

### 4.1 æ–°å¢ç¬¬ä¸€å€‹ä½¿ç”¨è€…

1. åœ¨ Authentication é é¢ï¼Œé»æ“Šã€ŒUsersã€ï¼ˆä½¿ç”¨è€…ï¼‰æ¨™ç±¤
2. é»æ“Šã€Œæ–°å¢ä½¿ç”¨è€…ã€æŒ‰éˆ•
3. **é›»å­éƒµä»¶**ï¼šè¼¸å…¥ç®¡ç†è€… Emailï¼ˆä¾‹å¦‚ï¼š`admin@lantern-festival.com`ï¼‰
4. **å¯†ç¢¼**ï¼šè¼¸å…¥å¼·å¯†ç¢¼ï¼ˆè‡³å°‘ 6 å€‹å­—å…ƒï¼Œå»ºè­°ä½¿ç”¨ 10+ å­—å…ƒåŒ…å«è‹±æ•¸å­—ï¼‰
5. é»æ“Šã€Œæ–°å¢ä½¿ç”¨è€…ã€

### 4.2 è¨˜éŒ„ç®¡ç†è€…å¸³è™Ÿ

âš ï¸ **é‡è¦ï¼šè«‹å°‡ç®¡ç†è€…å¸³è™Ÿè³‡è¨Šè¨˜éŒ„åœ¨å®‰å…¨çš„åœ°æ–¹**

```
ç®¡ç†è€… Email: ____________________
ç®¡ç†è€…å¯†ç¢¼: ____________________
```

âœ… **Task T007 å®Œæˆ**

---

## âš™ï¸ æ­¥é©Ÿ 5ï¼šå–å¾— Firebase è¨­å®š

### 5.1 å‰å¾€å°ˆæ¡ˆè¨­å®š

1. é»æ“Š Firebase Console å·¦ä¸Šè§’çš„ã€Œé½’è¼ªã€åœ–ç¤º
2. é¸æ“‡ã€Œå°ˆæ¡ˆè¨­å®šã€

### 5.2 è¨»å†Š Web æ‡‰ç”¨ç¨‹å¼

1. å‘ä¸‹æ²å‹•åˆ°ã€Œæ‚¨çš„æ‡‰ç”¨ç¨‹å¼ã€å€å¡Š
2. é»æ“Šã€Œ</>ã€åœ–ç¤ºï¼ˆWeb åœ–ç¤ºï¼‰
3. **æ‡‰ç”¨ç¨‹å¼æš±ç¨±**ï¼šè¼¸å…¥ `lantern-festival-web`
4. **ä¸è¦å‹¾é¸** Firebase Hostingï¼ˆæˆ‘å€‘ä½¿ç”¨ Netlifyï¼‰
5. é»æ“Šã€Œè¨»å†Šæ‡‰ç”¨ç¨‹å¼ã€

### 5.3 è¤‡è£½ Firebase è¨­å®š

1. åœ¨ä¸‹ä¸€å€‹ç•«é¢ï¼Œæœƒé¡¯ç¤º `firebaseConfig` ç‰©ä»¶
2. **å®Œæ•´è¤‡è£½**ä»¥ä¸‹æ ¼å¼çš„è¨­å®šå€¼ï¼š

```javascript
const firebaseConfig = {
  apiKey: "AIza...",
  authDomain: "lantern-festival-2026.firebaseapp.com",
  databaseURL: "https://lantern-festival-2026-default-rtdb.firebaseio.com",
  projectId: "lantern-festival-2026",
  storageBucket: "lantern-festival-2026.appspot.com",
  messagingSenderId: "1234567890",
  appId: "1:1234567890:web:..."
};
```

3. é»æ“Šã€Œç¹¼çºŒå‰å¾€æ§åˆ¶å°ã€

---

## ğŸ“ æ­¥é©Ÿ 6ï¼šæ›´æ–°å°ˆæ¡ˆè¨­å®šæª”

### 6.1 ç·¨è¼¯ firebase-config.js

1. é–‹å•Ÿæª”æ¡ˆï¼š`public/scripts/firebase-config.js`
2. æ‰¾åˆ°ä»¥ä¸‹å€å¡Šï¼š

```javascript
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
  appId: "YOUR_APP_ID"
};
```

3. **å–ä»£ç‚º**æ­¥é©Ÿ 5.3 è¤‡è£½çš„å¯¦éš›è¨­å®šå€¼
4. **å„²å­˜æª”æ¡ˆ**

### 6.2 é©—è­‰è¨­å®š

ç¢ºèª `firebaseConfig` ä¸­çš„ 7 å€‹æ¬„ä½éƒ½å·²æ›¿æ›ç‚ºå¯¦éš›å€¼ï¼š
- âœ… `apiKey`: æ‡‰ä»¥ `AIza` é–‹é ­
- âœ… `authDomain`: æ‡‰åŒ…å«æ‚¨çš„å°ˆæ¡ˆ ID
- âœ… `databaseURL`: æ‡‰åŒ…å«æ‚¨çš„å°ˆæ¡ˆ ID å’Œ `-default-rtdb`
- âœ… `projectId`: æ‚¨çš„å°ˆæ¡ˆ ID
- âœ… `storageBucket`: æ‡‰åŒ…å«æ‚¨çš„å°ˆæ¡ˆ ID
- âœ… `messagingSenderId`: ç´”æ•¸å­—
- âœ… `appId`: æ‡‰ä»¥ `1:` é–‹é ­

âœ… **Task T008 å®Œæˆ**

---

## ğŸ§ª æ­¥é©Ÿ 7ï¼šæ¸¬è©¦ Firebase é€£ç·š

### 7.1 é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

å¦‚æœä¼ºæœå™¨æ­£åœ¨é‹è¡Œï¼Œè«‹é‡æ–°æ•´ç†ç€è¦½å™¨é é¢ã€‚

### 7.2 æª¢æŸ¥ç€è¦½å™¨ Console

1. é–‹å•Ÿç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ›åˆ°ã€ŒConsoleã€æ¨™ç±¤
3. é‡æ–°æ•´ç†é é¢
4. **é æœŸçœ‹åˆ°**ï¼š
   ```
   Firebase initialized successfully
   Database URL: https://your-project-id-default-rtdb.firebaseio.com
   Router initialized
   Application initialized successfully
   ```

5. **ä¸æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯**

### 7.3 æ¸¬è©¦å ±ååŠŸèƒ½

1. å‰å¾€é¦–é ï¼š`http://localhost:8000`
2. é»æ“Šã€Œå‚³çµ±ä¹é¾œã€
3. é»æ“Šã€Œå‰å¾€å ±åã€
4. å¡«å¯«æ¸¬è©¦è³‡æ–™ï¼š
   - å§“åï¼š`æ¸¬è©¦ä½¿ç”¨è€…`
   - é›»è©±ï¼š`0912345678`
5. é»æ“Šã€Œæäº¤å ±åã€
6. **é æœŸçµæœ**ï¼šé¡¯ç¤ºç¶ è‰²æˆåŠŸè¨Šæ¯ã€Œå ±åæˆåŠŸï¼ã€

### 7.4 é©—è­‰è³‡æ–™å·²å„²å­˜

1. å›åˆ° Firebase Console
2. å‰å¾€ã€ŒRealtime Databaseã€â†’ã€Œè³‡æ–™ã€æ¨™ç±¤
3. å±•é–‹ `registrations` ç¯€é»
4. **æ‡‰è©²çœ‹åˆ°**ä¸€ç­†æ–°çš„å ±åç´€éŒ„ï¼ŒåŒ…å«ï¼š
   - `name`: "æ¸¬è©¦ä½¿ç”¨è€…"
   - `phone`: "0912345678"
   - `timestamp`: æ•¸å­—ï¼ˆUnix æ™‚é–“æˆ³è¨˜ï¼‰
   - `createdAt`: ISO æ ¼å¼æ™‚é–“å­—ä¸²

âœ… **å ±ååŠŸèƒ½æ¸¬è©¦é€šé**

---

## ğŸ”‘ æ­¥é©Ÿ 8ï¼šæ¸¬è©¦ç®¡ç†è€…ç™»å…¥

### 8.1 å‰å¾€ç®¡ç†è€…ç™»å…¥é é¢

1. åœ¨ç€è¦½å™¨ä¸­å‰å¾€ï¼š`http://localhost:8000#admin-login`
2. è¼¸å…¥æ­¥é©Ÿ 4 å»ºç«‹çš„ç®¡ç†è€…å¸³è™Ÿ
3. é»æ“Šã€Œç™»å…¥ã€

### 8.2 é©—è­‰ç™»å…¥æˆåŠŸ

**é æœŸçµæœ**ï¼š
- é¡¯ç¤ºç¶ è‰²è¨Šæ¯ã€Œç™»å…¥æˆåŠŸï¼ã€
- è‡ªå‹•è·³è½‰åˆ°ç®¡ç†è€…å¾Œå°é é¢ï¼ˆ`#admin`ï¼‰
- çœ‹åˆ°å ±åçµ±è¨ˆå¡ç‰‡ï¼ˆé¡¯ç¤ºæ•¸å­—ï¼‰
- çœ‹åˆ°å ±åæ¸…å–®è¡¨æ ¼ï¼ˆåŒ…å«å‰›æ‰çš„æ¸¬è©¦è³‡æ–™ï¼‰

### 8.3 æ¸¬è©¦ CSV åŒ¯å‡º

1. é»æ“Šã€ŒğŸ“¥ åŒ¯å‡º CSVã€æŒ‰éˆ•
2. **é æœŸçµæœ**ï¼šè‡ªå‹•ä¸‹è¼‰ CSV æª”æ¡ˆï¼Œæª”åæ ¼å¼ç‚º `å ±åæ¸…å–®_2025-10-31_15-30-00.csv`
3. é–‹å•Ÿ CSV æª”æ¡ˆï¼Œç¢ºèªåŒ…å«å ±åè³‡æ–™

### 8.4 æ¸¬è©¦ç™»å‡º

1. é»æ“Šã€ŒğŸšª ç™»å‡ºã€æŒ‰éˆ•
2. ç¢ºèªç™»å‡º
3. **é æœŸçµæœ**ï¼š
   - é¡¯ç¤ºã€Œå·²ç™»å‡ºã€è¨Šæ¯
   - è‡ªå‹•è·³è½‰åˆ°ç™»å…¥é é¢

âœ… **ç®¡ç†è€…åŠŸèƒ½æ¸¬è©¦é€šé**

---

## âœ… å®Œæˆæª¢æŸ¥æ¸…å–®

è«‹ç¢ºèªä»¥ä¸‹æ‰€æœ‰é …ç›®éƒ½å·²å®Œæˆï¼š

- [ ] Firebase å°ˆæ¡ˆå·²å»ºç«‹
- [ ] Realtime Database å·²å•Ÿç”¨ä¸¦éƒ¨ç½²å®‰å…¨æ€§è¦å‰‡
- [ ] Authentication (Email/Password) å·²å•Ÿç”¨
- [ ] ç®¡ç†è€…å¸³è™Ÿå·²å»ºç«‹
- [ ] Firebase è¨­å®šå·²è¤‡è£½åˆ° `firebase-config.js`
- [ ] ç€è¦½å™¨ Console æ²’æœ‰ Firebase éŒ¯èª¤
- [ ] å ±ååŠŸèƒ½æ¸¬è©¦æˆåŠŸï¼ˆè³‡æ–™å‡ºç¾åœ¨ Firebaseï¼‰
- [ ] ç®¡ç†è€…ç™»å…¥æ¸¬è©¦æˆåŠŸ
- [ ] å ±åæ¸…å–®é¡¯ç¤ºæ­£ç¢º
- [ ] CSV åŒ¯å‡ºåŠŸèƒ½æ­£å¸¸

---

## ğŸš¨ å¸¸è¦‹å•é¡Œæ’è§£

### å•é¡Œ 1ï¼šã€ŒPermission deniedã€éŒ¯èª¤

**åŸå› **ï¼šå®‰å…¨æ€§è¦å‰‡æœªæ­£ç¢ºè¨­å®š

**è§£æ±ºæ–¹æ³•**ï¼š
1. æª¢æŸ¥ Realtime Database è¦å‰‡æ˜¯å¦æ­£ç¢ºéƒ¨ç½²
2. ç¢ºèªè¦å‰‡ä¸­å…è¨±æœªç™»å…¥å¯«å…¥å ±åè³‡æ–™
3. ç¢ºèªç®¡ç†è€…å·²ç™»å…¥æ‰èƒ½è®€å–è³‡æ–™

### å•é¡Œ 2ï¼šã€ŒFirebase: Error (auth/invalid-email)ã€

**åŸå› **ï¼šEmail æ ¼å¼ä¸æ­£ç¢º

**è§£æ±ºæ–¹æ³•**ï¼š
1. ç¢ºèª Email åŒ…å« `@` ç¬¦è™Ÿ
2. ä½¿ç”¨æœ‰æ•ˆçš„ Email æ ¼å¼

### å•é¡Œ 3ï¼šå ±åå¾Œè³‡æ–™æœªå‡ºç¾åœ¨ Firebase

**åŸå› **ï¼šå¯èƒ½æ˜¯ç¶²è·¯å•é¡Œæˆ–è¨­å®šéŒ¯èª¤

**è§£æ±ºæ–¹æ³•**ï¼š
1. æª¢æŸ¥ç€è¦½å™¨ Console æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
2. ç¢ºèª `databaseURL` è¨­å®šæ­£ç¢º
3. ç¢ºèªå®‰å…¨æ€§è¦å‰‡å…è¨±å¯«å…¥

### å•é¡Œ 4ï¼šç®¡ç†è€…ç„¡æ³•ç™»å…¥

**åŸå› **ï¼šå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤

**è§£æ±ºæ–¹æ³•**ï¼š
1. åœ¨ Firebase Console â†’ Authentication â†’ Users æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦å­˜åœ¨
2. å˜—è©¦é‡è¨­å¯†ç¢¼
3. ç¢ºèªå¯†ç¢¼è‡³å°‘ 6 å€‹å­—å…ƒ

---

## ğŸ“š ç›¸é—œè³‡æº

- [Firebase å®˜æ–¹æ–‡ä»¶](https://firebase.google.com/docs)
- [Realtime Database å®‰å…¨æ€§è¦å‰‡](https://firebase.google.com/docs/database/security)
- [Firebase Authentication æ–‡ä»¶](https://firebase.google.com/docs/auth)
- [Firebase å…è²»æ–¹æ¡ˆé™åˆ¶](https://firebase.google.com/pricing)

---

## ğŸ‰ æ­å–œï¼

Firebase è¨­å®šå®Œæˆï¼ç¾åœ¨æ‚¨å¯ä»¥ï¼š
- âœ… æ¥å—è¨ªå®¢å ±å
- âœ… ç®¡ç†è€…ç™»å…¥æŸ¥çœ‹å ±åè³‡æ–™
- âœ… åŒ¯å‡ºå ±åæ¸…å–®ç‚º CSV

**ä¸‹ä¸€æ­¥**ï¼šç¹¼çºŒ Phase 7ï¼ˆæ•´åˆèˆ‡æœ€ä½³åŒ–ï¼‰æˆ–æº–å‚™éƒ¨ç½²åˆ° Netlifyã€‚
